Bootstrap: docker
From: rocker/tidyverse:4.4

%post
    export DEBIAN_FRONTEND=noninteractive
    
    apt-get update && apt-get install -y \
        perl \
        cpanminus \
        libxml2-dev \
        libcurl4-openssl-dev \
        libssl-dev \
        ncbi-blast+ \
        wget \
        && rm -rf /var/lib/apt/lists/*
    
    cpanm Getopt::Long
    
    R -e "install.packages('BiocManager', repos='https://cloud.r-project.org/')"
    
    R -e "BiocManager::install(c( \
        'GenomicRanges', \
        'pwalign', \
        'Biostrings', \
        'rtracklayer', \
        'TxDb.Hsapiens.UCSC.hg38.knownGene', \
        'ensembldb', \
        'EnsDb.Hsapiens.v86', \
        'annotatr', \
        'AnnotationHub', \
        'S4Vectors' \
    ), ask=FALSE, update=FALSE)"
    
    R -e "install.packages(c( \
        'ggforce', \
        'ape', \
        'stringi', \
        'chromoMap', \
        'randomcoloR', \
        'data.table', \
        'patchwork', \
        'readxl' \
    ), repos='https://cloud.r-project.org/')"

%environment
    export LC_ALL=C
    export PATH=/usr/bin:/usr/local/bin:$PATH

%runscript
    exec R "$@"

%help
    This container includes:
    - R 4.4 with tidyverse
    - Perl with Getopt::Long
    - BLAST+ (blastn, makeblastdb, etc.)
    - Bioconductor genomic analysis packages